<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Список замовлень</title>
    <link rel="stylesheet" href="../static/css/main.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    
</head>
<body>

  <div class="white-stripe"></div>
<div class="full-page-background"></div>    
  <div class="my-content">    

  <div class="full-height-70px-width-div">
    <a class="home-img" href="#"><img src="/static/images/home2.png" width="30px" height="30px" ></a>
    <a class="offer-list-img" href="#"><img src="/static/images/shopping-cart2.png" width="25px" height="26px" ></a>
    <a class="clients-img" href="#"><img src="/static/images/group2.png" width="30px" height="30px" ></a>
    <a class="analytics-img" href="#"> <img src="/static/images/analytics.png" width="30px" height="30px" > </a>
    <a class="user-img" href="#"><img src="/static/images/user.png" width="30px" height="30px" ></a>
    <a class="exit-img" href="#"><img src="/static/images/exit.png" width="30px" height="30px" ></a>
    <div class="div-70x70px">

    </div>

  </div>

    <div class="menu">

      <div class="menu-bckground">

        <div class="in-menu-div-70x70px">

          <a class="menu2-btn" href="#"><img src="/static/images/logo.png" width="70px" height="70px" ></a>

          </div>

        </div>

        <a class="menu-btn" href="#"><img src="/static/images/logo.png" width="70px" height="70px" ></a>

     <nav class="menu-list">
        <a class="home-img" href="#"><img src="/static/images/home1.png" width="30px" height="30px" ></a>
        <a id="href-main" href="#">Головна</a>

        <a class="offer-list-img" href="#"><img src="/static/images/shopping-cart1.png" width="25px" height="26px" ></a>
        <a id="href-offer-list" href="#">Список товарів</a>

        <a class="clients-img" href="#"><img src="/static/images/group1.png" width="30px" height="30px" ></a>
        <a id="href-clients" href="#">Клієнти</a>

        <a class="analytics-img" href="#"><img src="/static/images/analytics1.png" width="30px" height="30px" ></a> </a>
        <a class="herf-analytics" style="font-size: large;" href="#">Аналітика</a>
        <a class="user-img" href="#"><img src="/static/images/user1.png" width="30px" height="30px" ></a> </a>
        <a class="href-user" style="font-size: large;" href="#">Користувачі</a>
        <a class="exit1-img" href="#"><img src="/static/images/exit1.png" width="30px" height="30px" ></a>
        <a class="href-exit" style="font-size: large;" href="#">Вийти</a>
     </nav>

    </div >
    <div class="navbar">
    <ul class="nav justify-content-start">

      <li class="nav-item">
        <a id="active-page" href="#">Список замовлень</a>
        </li>
    </ul>

    <ul class="nav justify-content-end">

        <li class="nav-item">
          <a id="export" class="btn btn-outline-primary" href="#" role="button">Доставка</a>
        </li>
        <li class="nav-item">
          <button id="create-offer" class="btn btn-primary" href="#" type="button">Створити замовлення</button>
        </li>
      </ul>
      <div id="order-alert" class="order-alert" style="display: none;">
        <img src="/static/images/bell.png" alt="Bell Icon" class="bell-icon">
        <span>Ви отримали нове замовлення</span>
        <button class="close-btn">&times;</button>
      </div>
      </div>     

    <div class="main-conent-div">
      <div class="rectangle-5">
        <div class="status-sort-div">
          <ul class="nav justify-content-end status-sort-select " >
            <li class="nav-item">
              <button class="btn btn-secondary dropdown-toggle" type="button" id="sortDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                Сортувати за статусом</button>
                <ul class="dropdown-menu" aria-labelledby="sortDropdown">
                  <li><a class="dropdown-item" href="#" data-status="">Всі замовлення</a></li>
                  <li><a class="dropdown-item" href="#" data-status="pending">В очікуванні</a></li>
                  <li><a class="dropdown-item" href="#" data-status="processing">В обробці</a></li>
                  <li><a class="dropdown-item" href="#" data-status="on-hold">На утриманні</a></li>
                  <li><a class="dropdown-item" href="#" data-status="completed">Завершений</a></li>
                  <li><a class="dropdown-item" href="#" data-status="cancelled">Скасований</a></li>
                  <li><a class="dropdown-item" href="#" data-status="refunded">Повернений</a></li>
                  <li><a class="dropdown-item" href="#" data-status="failed">Невдалий</a></li>
                  <li><a class="dropdown-item" href="#" data-status="trash">Корзина</a></li>
            </li>
          </ul>
        </div>

         <div class="navi">
            <select class="form-select" id="managerFilter">
              <option value="">Всі менеджери</option>
            </select>

             <div class="filterDD">
              <li class="form-check">
                <input class="form-check-input" type="checkbox" value="" id="CheckOldest">
                <label class="form-check-label" for="CheckOldest">
                  Від старіших
                </label>
              </li>
             </div>
            
            <div class="input-group mb-3">
              <button class="btn btn-outline-secondary" type="button" id="searchButton">Пошук</button>
              <input type="text" class="form-control flex-grow-1" id="searchInput" placeholder="Введіть ПІБ покупця" aria-label="Пошук по ПІБ покупця" aria-describedby="searchButton">
            </div>
                    
        </div>
        <div class="mytable">
          <table class="table" id="table1">
            <thead>
              <tr>
                <th scope="col"></th>
                <th scope="col">Замовлення</th>
                <th scope="col">Загальна сумма</th>
                <th scope="col">Клієнт</th>
                <th scope="col">Доставка і оплата</th>
                <th scope="col">Статус</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
        </div>
        <nav aria-label="Page navigation">
          <ul class="pagination justify-content-center" id="paginationContainer"></ul>
        </nav>
      </div>

      <div class="modal fade" id="createOrderModal" tabindex="-1" aria-labelledby="createOrderModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="createOrderModalLabel">Створити замовлення</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <form class="create_order_form" style="max-height: px; overflow-y: auto;">
                <div class="mb-3">
                  <label for="customerFirstName" class="form-label">Ім'я</label>
                  <input type="text" class="form-control" id="customerFirstName" required>
                </div>
                <div class="mb-3">
                  <label for="customerLastName" class="form-label">Прізвище</label>
                  <input type="text" class="form-control" id="customerLastName" required>
                </div>
                <div class="mb-3">
                  <label for="customerMiddleName" class="form-label">По батькові</label>
                  <input type="text" class="form-control" id="customerMiddleName">
                </div>
                <div class="mb-3">
                  <label for="customerPhone" class="form-label">Номер телефону</label>
                  <input type="tel" class="form-control" id="customerPhone" required>
                </div>
                <div class="mb-3">
                  <label for="customerEmail" class="form-label">Email</label>
                  <input type="email" class="form-control" id="customerEmail" required>
                </div>
                <div class="mb-3">
                  <label for="shippingAddress" class="form-label">Адреса доставки</label>
                  <input type="text" class="form-control" id="shippingAddress" required>
                </div>
                <div class="mb-3">
                  <label for="shippingCity" class="form-label">Місто доставки</label>
                  <input type="text" class="form-control" id="shippingCity" required>
                </div>
                <div class="mb-3">
                  <label for="shippingPostcode" class="form-label">Поштовий індекс</label>
                  <input type="text" class="form-control" id="shippingPostcode" required>
                </div>
                <div class="mb-3">
                  <label for="shippingMethod" class="form-label">Метод доставки</label>
                  <select class="form-select" id="shippingMethod" required>
                    <option value="">Виберіть метод доставки</option>
                    <option value="flat_rate">Нова Пошта</option>
                    <option value="free_shipping">Укрпошта</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="paymentMethod" class="form-label">Метод оплати</label>
                  <select class="form-select" id="paymentMethod" required>
                    <option value="">Виберіть метод оплати</option>
                    <option value="bacs">Переказ на Р/Р</option>
                    <option value="cod">Готівка при отриманні</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="productSearchCreate" class="form-label">Пошук товару</label>
                  <input type="text" class="form-control" id="productSearchCreate" placeholder="Введіть назву товару">
                </div>
                <div class="mb-3 form-check">
                  <input type="checkbox" class="form-check-input" id="searchBySkuForCreate">
                  <label class="form-check-label" for="searchBySkuForCreate">Пошук по артикулу</label>
                </div>
                <div class="mb-3">
                  <label for="productSelectCreate" class="form-label">Товар</label>
                  <div class="custom-select-create">
                    <div class="selected-option-create">Виберіть товар</div>
                    <div class="options-container-create"></div>
                  </div>
                </div>
                
                <div class="mb-3">
                  <table id="selectedProductsTable" class="table">
                    <thead>
                      <tr>
                        <th>Зображення</th>
                        <th>Товар</th>
                        <th>Кількість</th>
                        <th>Ціна за од.</th>
                        <th>Дія</th>
                      </tr>
                    </thead>
                    <tbody>
                    </tbody>
                  </table>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
              <button type="button" class="btn btn-primary" id="createOrderBtn">Створити замовлення</button>
            </div>
          </div>
        </div>
      </div>  

    <!-- Модальное окно -->
<div class="modal fade" id="myModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Навигация с помощью табов -->
        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#tab1" type="button" role="tab" aria-controls="tab1" aria-selected="true">Вкладка 1</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button" role="tab" aria-controls="tab2" aria-selected="false">Вкладка 2</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="tab3-tab" data-bs-toggle="tab" data-bs-target="#tab3" type="button" role="tab" aria-controls="tab3" aria-selected="false">Вкладка 3</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="viber-tab" data-bs-toggle="tab" data-bs-target="#viber" type="button" role="tab" aria-controls="viber" aria-selected="false">Viber</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="email-tab" data-bs-toggle="tab" data-bs-target="#email" type="button" role="tab" aria-controls="email" aria-selected="false">Email</button>
          </li>
        </ul>
        <!-- Содержимое табов -->
        <div class="tab-content" id="myTabContent">
          <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
            
          </div>
          <div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
            
            </div>
          <div class="tab-pane fade" id="tab3" role="tabpanel" aria-labelledby="tab3-tab">
            Содержимое вкладки 3
          </div>
          <div class="tab-pane fade" id="viber" role="tabpanel" aria-labelledby="viber-tab">
            <div class="mb-3">
              <label for="viberPhone" class="form-label">Номер телефона для Viber</label>
              <input type="tel" class="form-control" id="viberPhone">
            </div>
            <div class="mb-3">
              <label for="viberMessage" class="form-label">Сообщение Viber</label>
              <textarea class="form-control" id="viberMessage" rows="3"></textarea>
            </div>
            <button type="button" class="btn btn-primary" id="sendViberBtn">Отправить Viber</button>
          </div>
          <div class="tab-pane fade" id="email" role="tabpanel" aria-labelledby="email-tab">
            <div class="mb-3">
              <label for="emailAddress" class="form-label">Email адрес</label>
              <input type="email" class="form-control" id="emailAddress">
            </div>
            <div class="mb-3">
              <label for="emailSubject" class="form-label">Тема письма</label>
              <input type="text" class="form-control" id="emailSubject">
            </div>
            <div class="mb-3">
              <label for="emailMessage" class="form-label">Текст письма</label>
              <textarea class="form-control" id="emailMessage" rows="3"></textarea>
            </div>
            <button type="button" class="btn btn-primary" id="sendEmailBtn">Отправить Email</button>
          </div>
        </div>
        
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-danger" id="delete-order" href="#">Видалити замовлення</button>
        <button type="button" class="btn btn-outline-secondary" id="createOrderCopy">Створити копію</button>
        <button type="button" class="btn btn-outline-primary" id="save-info" href="#">Зберегти</button>
        <button type="button" class="btn btn-primary" id="printButton" href="#">Друк</button>
      </div>
    </div>
  </div>
</div>
<!-- Дочернее модальное окно -->
<div class="modal fade" id="addProductModal" tabindex="-1" aria-labelledby="addProductModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addProductModalLabel">Додати товар</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="mb-3">
            <label for="productSearch" class="form-label">Пошук товару</label>
            <input type="text" class="form-control" id="productSearch" placeholder="Введіть назву або артикул товару">
          </div>
          <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" id="searchBySkuForAddProduct">
            <label class="form-check-label" for="searchBySkuForAddProduct">Пошук по артикулу</label>
          </div>
          <div class="mb-3">
            <label for="productSelect" class="form-label">Виберіть товар</label>
            <div class="custom-select">
              <div class="selected-option">Виберіть товар</div>
              <div class="options-container">
                <!-- Опции будут динамически добавлены сюда -->
              </div>
            </div>
          </div>
          <div class="mb-3">
            <label for="quantityInput" class="form-label">Кількість</label>
            <input type="number" class="form-control" id="quantityInput" min="1" value="1">
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
        <button type="button" class="btn btn-primary" id="saveProductBtn">Зберегти</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="copyOrderModal" tabindex="-1" aria-labelledby="copyOrderModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="copyOrderModalLabel">Створити копію замовлення</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="copyOrderModalBody">
        <!-- Здесь будет форма для редактирования заказа -->
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
        <button type="button" class="btn btn-primary" id="createCopyOrderBtn">Створити копію</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="addProductModalForCopy" tabindex="-1" aria-labelledby="addProductForCopyModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addProductForCopyModalLabel">Додати товар</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="mb-3">
          <label for="productSearchForCopy" class="form-label">Пошук товару</label>
          <input type="text" class="form-control" id="productSearchForCopy" placeholder="Введіть назву товару">
        </div>
        <div class="mb-3 form-check">
          <input type="checkbox" class="form-check-input" id="searchBySkuForCopy">
          <label class="form-check-label" for="searchBySkuForCopy">Пошук по артикулу</label>
        </div>
        <div class="mb-3">
          <label class="form-label">Виберіть товар</label>
          <div class="custom-select-copy">
            <div class="selected-option-copy">Виберіть товар</div>
            <div class="options-container-copy"></div>
          </div>
        </div>
        <div class="mb-3">
          <label for="productQuantityForCopy" class="form-label">Кількість</label>
          <input type="number" class="form-control" id="productQuantityForCopy" value="1" min="1">
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрити</button>
        <button type="button" class="btn btn-primary" id="addProductConfirm">Додати</button>
      </div>
    </div>
  </div>
</div>

<!-- Модальное окно для просмотра/редактирования клиента -->
<div class="modal fade" id="clientModal" tabindex="-1" aria-labelledby="clientModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="clientModalLabel"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="accordion" id="clientAccordion">
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingOne">
              <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                Інформація про клієнта
              </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse show customerInfo" aria-labelledby="headingOne" data-bs-parent="#clientAccordion">
              <div class="accordion-body">
                <div class="forInModalClientTable">
                  <table class="table" id="inClient-table">
                    <thead>
                      <tr>
                        <th scope="col">Ім'я</th>
                        <th scope="col">Email</th>
                        <th scope="col">Телефон</th>
                        <th scope="col">Адреса</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          <input type="text" class="form-control" id="editClientName" required>
                        </td>
                        <td>
                          <input type="email" class="form-control" id="editClientEmail" required>
                        </td>
                        <td>
                          <input type="tel" class="form-control" id="editClientPhone" required>
                        </td>
                        <td>
                          <textarea class="form-control" id="editClientAddress" rows="3" required></textarea>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="client-tags">
                  <!-- Теги будут добавляться сюда динамически -->
                </div>
                <div class="dropdown">
                  <button class="add-tag-btn" type="button" id="addCustomStatusBtn" data-bs-toggle="dropdown" aria-expanded="false">
                    +
                  </button>
                  <div class="dropdown-menu">
                    <div class="dropdown-item">
                      <input type="text" class="form-control" id="newCustomStatusInput" placeholder="Новий статус">
                    </div>
                    <div class="dropdown-divider"></div>
                    <div id="customStatusList">
                      <!-- Список кастомных статусов будет добавлен сюда динамически -->
                    </div>
                  </div>
                </div>
                <div id="customerStats" class="mt-3">
                  <p>Кількість замовлень: <span id="orderCount"></span></p>
                  <p>Загальна сума замовлень: <span id="totalAmount"></span> грн</p>
                </div>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
              <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                Замовлення клієнта
              </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse customerOrders" aria-labelledby="headingTwo" data-bs-parent="#clientAccordion">
              <div class="accordion-body">
                <div class="mytable">
                  <table class="table" id="clientOrdersTable">
                    <thead>
                      <tr>
                        <th scope="col"></th>
                        <th scope="col">Замовлення</th>
                        <th scope="col">Загальна сумма</th>
                        <th scope="col">Доставка і оплата</th>
                        <th scope="col">Статус</th>
                      </tr>
                    </thead>
                    <tbody>
                    </tbody>
                  </table>
                </div>
                <nav aria-label="Page navigation">
                  <ul class="pagination justify-content-center" id="clientOrdersPaginationContainer"></ul>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-danger" id="deleteClientBtn">Видалити клієнта</button>
        <button type="button" class="btn btn-primary" id="saveChangesBtn">Зберегти</button>
      </div>
    </div>
  </div>
</div>

  <script>
    const ordersData = `{% autoescape false %}{{ orders | tojson | safe }}{% endautoescape %}`;
    console.log(ordersData);
    // Ваш JavaScript-код для обработки ordersData и заполнения таблицы
</script>

<script src="../static/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
</body>
</html>